<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><title>Soporte en Crisis TOC - Emotion Game</title><script src="https://unpkg.com/phaser@3.70.0/dist/phaser.min.js"></script><script>// Fallback: Si el CDN falla, cargar versi√≥n local
        window.Phaser || document.write('<script src="js/phaser.min.js"><\/script>');</script><style>*{margin:0;padding:0;box-sizing:border-box}body,html{width:100%;height:100%;overflow:hidden}body{display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#1a1a2e 0,#16213e 50%,#0f3460 100%);font-family:'Segoe UI',system-ui,sans-serif}:root{--site-scale:1}#game-container{width:100vw;height:100vh;position:relative}#chat-panel{position:fixed;bottom:20px;right:20px;width:380px;max-height:550px;background:rgba(255,255,255,.95);border-radius:15px;box-shadow:0 10px 40px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;backdrop-filter:blur(10px);z-index:1000;transform:scale(var(--site-scale));transform-origin:bottom right;transition:transform .3s cubic-bezier(.175, .885, .32, 1.275),max-height .3s ease}#chat-panel.minimized{max-height:50px;cursor:pointer}#chat-header{background:linear-gradient(135deg,#6c5ce7 0,#5f4bd8 100%);color:#fff;padding:15px;font-weight:600;font-size:16px;display:flex;align-items:center;gap:10px;cursor:pointer}#chat-header .toggle-icon{margin-left:10px;font-size:12px;transition:transform .3s}#chat-panel.minimized #chat-header .toggle-icon{transform:rotate(180deg)}#connection-status{margin-left:auto;font-size:11px;padding:3px 8px;border-radius:10px;background:rgba(255,255,255,.2)}#connection-status.connected{background:#27ae60}#connection-status.error{background:#e74c3c}#selected-emotion{display:none;background:rgba(255,255,255,.2);padding:5px 10px;border-radius:12px;font-size:12px}#chat-messages{flex:1;overflow-y:auto;padding:15px;max-height:380px;background:rgba(255,255,255,.5)}.chat-message{margin-bottom:12px;animation:slideIn .3s ease-out}@keyframes slideIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.user-message{text-align:right}.user-message .message-content{display:inline-block;background:#6c5ce7;color:#fff;padding:10px 15px;border-radius:15px 15px 5px 15px;max-width:80%;word-wrap:break-word;pointer-events:none;cursor:default;user-select:text}.bot-message .message-content{display:inline-block;background:#fff;color:#2d3436;padding:10px 15px;border-radius:15px 15px 15px 5px;max-width:85%;word-wrap:break-word;border:1px solid #e0e0e0;white-space:pre-wrap;pointer-events:none;cursor:default;user-select:text}.crisis-emergency .message-content{border:2px solid #e74c3c;background:#ffebee}.crisis-high_distress .message-content{border:2px solid #f39c12;background:#fff9e6}.message-time{font-size:10px;color:#7f8c8d;margin-top:4px}#chat-loading{display:none;padding:15px;text-align:center;color:#7f8c8d;font-size:14px;background:rgba(108,92,231,.05);border-top:1px solid rgba(108,92,231,.1)}.loading-spinner{display:inline-block;width:16px;height:16px;border:2px solid #6c5ce7;border-radius:50%;border-top-color:transparent;animation:spin 1s linear infinite;margin-right:8px;vertical-align:middle}@keyframes spin{to{transform:rotate(360deg)}}#chat-input-container{padding:15px;background:#fff;border-top:1px solid #e0e0e0;display:flex;gap:10px}#chat-input{flex:1;padding:10px 15px;border:1px solid #ddd;border-radius:20px;font-size:14px;font-family:'Segoe UI',system-ui,sans-serif;outline:0;transition:border-color .3s}.highlight-suggested{animation:pulseHighlight 2s ease-out;border-color:#6c5ce7;box-shadow:0 0 0 4px rgba(108,92,231,.25)}@keyframes pulseHighlight{0%{box-shadow:0 0 0 0 rgba(108,92,231,.35)}70%{box-shadow:0 0 0 12px rgba(108,92,231,0)}100%{box-shadow:0 0 0 0 rgba(108,92,231,0)}}#chat-input:focus{border-color:#6c5ce7}#chat-send-btn{background:#6c5ce7;color:#fff;border:none;padding:10px 20px;border-radius:20px;cursor:pointer;font-weight:600;transition:background .3s,transform .1s}#chat-send-btn:hover{background:#5f4bd8}#chat-send-btn:active{transform:scale(.95)}#chat-send-btn:disabled{background:#bdc3c7;cursor:not-allowed}#app-title{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#6c5ce7 0,#5f4bd8 100%);padding:12px 20px;box-shadow:0 2px 10px rgba(0,0,0,.3);z-index:1001;font-size:16px;font-weight:600;color:#fff;text-align:center;line-height:1.4;backdrop-filter:blur(10px)}#app-title .title-text{display:inline-block}#app-title .info-badge{display:inline-block;margin-left:8px;width:18px;height:18px;line-height:18px;text-align:center;background:rgba(255,255,255,.3);border:1px solid rgba(255,255,255,.5);border-radius:50%;font-size:12px;font-weight:700;cursor:pointer;vertical-align:middle;transition:all .3s ease}#app-title .info-badge:hover{background:rgba(255,255,255,.5);transform:scale(1.1)}#app-title .tooltip{position:absolute;top:100%;left:50%;transform:translateX(-50%);margin-top:10px;width:90%;max-width:500px;background:rgba(255,255,255,.98);color:#2d3436;padding:15px 20px;border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,.3);font-size:13px;line-height:1.6;z-index:1002;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;pointer-events:none}#app-title .tooltip.show{opacity:1;visibility:visible;pointer-events:auto}#app-title .tooltip::before{content:'';position:absolute;bottom:100%;left:50%;transform:translateX(-50%);border:8px solid transparent;border-bottom-color:rgba(255,255,255,.98)}#instructions{position:fixed;top:60px;left:50%;transform:translateX(-50%) scale(var(--site-scale));transform-origin:top center;background:rgba(255,255,255,.95);padding:15px 30px;border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,.2);text-align:center;backdrop-filter:blur(10px);z-index:1000}#instructions h3{margin:0 0 5px 0;color:#6c5ce7;font-size:18px}#instructions p{margin:0;color:#2d3436;font-size:14px}.hidden-ui{display:none!important}.phaser-input-container{position:relative;background:rgba(255,255,255,.9);padding:10px;border-radius:20px;display:flex;gap:10px;box-shadow:0 4px 15px rgba(0,0,0,.2);width:300px;border:2px solid #6c5ce7}.phaser-chat-input{border:none;background:0 0;outline:0;font-family:inherit;flex:1;font-size:17px}.phaser-send-btn{background:#6c5ce7;color:#fff;border:none;padding:4px 10px;border-radius:15px;cursor:pointer;font-weight:700;font-size:11px}.phaser-send-btn:hover{background:#5a4bc7}.phaser-history-btn{background:#f0f0f0;color:#6c5ce7;border:2px solid #6c5ce7;padding:5px 10px;border-radius:15px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center}.phaser-history-btn:hover{background:#e0e0e0}.phaser-input-wrapper{display:flex;flex-direction:column;align-items:center;gap:8px}.phaser-loading-bar{display:flex;align-items:center;justify-content:center;gap:5px;background:rgba(108,92,231,.15);padding:8px 25px;border-radius:15px;border:2px solid #6c5ce7}.phaser-loading-dots{display:flex;gap:6px}.phaser-loading-dots span{width:10px;height:10px;background:#6c5ce7;border-radius:50%;animation:loadingBounce 1.4s infinite ease-in-out both}.phaser-loading-dots span:first-child{animation-delay:-.32s}.phaser-loading-dots span:nth-child(2){animation-delay:-.16s}.phaser-loading-dots span:nth-child(3){animation-delay:0s}@keyframes loadingBounce{0%,100%,80%{transform:scale(.6);opacity:.5}40%{transform:scale(1);opacity:1}}.phaser-history-content{width:360px;max-height:360px;overflow-y:auto;padding:10px;background:#f9f9f9;border-radius:10px;margin:10px 0}.history-entry{background:#fff;padding:12px;margin-bottom:10px;border-radius:10px;border-left:4px solid #6c5ce7;box-shadow:0 2px 5px rgba(0,0,0,.1)}.history-entry.history-user{border-left-color:#6c5ce7}.history-entry.history-bot{border-left-color:#27ae60}.history-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:13px}.history-header strong{color:#2d3436}.history-time{color:#999;font-size:11px}.history-message{color:#555;font-size:13px;line-height:1.5;word-wrap:break-word}.crisis-tag{background:#e74c3c;color:#fff;padding:2px 8px;border-radius:8px;font-size:10px;font-weight:700;margin-left:5px;text-transform:uppercase}.phaser-history-content::-webkit-scrollbar{width:8px}.phaser-history-content::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.phaser-history-content::-webkit-scrollbar-thumb{background:#6c5ce7;border-radius:10px}.phaser-history-content::-webkit-scrollbar-thumb:hover{background:#5a4bc7}@media (max-width:768px){#chat-panel{width:calc(100% - 40px);max-height:450px}#instructions{width:calc(100% - 40px);top:10px}#privacy-banner{width:calc(100% - 40px)}}#privacy-banner{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,255,255,.98);padding:30px;border-radius:20px;box-shadow:0 15px 60px rgba(0,0,0,.5);z-index:2000;max-width:650px;width:90%;max-height:85vh;backdrop-filter:blur(15px);flex-direction:column;border:1px solid rgba(108,92,231,.2)}#privacy-banner .privacy-content{overflow-y:auto;flex:1;padding-right:10px}#privacy-banner h3{margin:0 0 15px 0;color:#6c5ce7;font-size:22px;text-align:center}#privacy-banner p{margin:12px 0;color:#2d3436;font-size:14px;line-height:1.6}#privacy-banner strong{color:#e74c3c}#privacy-banner .warning-icon{display:inline-block;margin-right:5px}#privacy-banner button{margin-top:15px;padding:12px 30px;background:#6c5ce7;color:#fff;border:none;border-radius:25px;cursor:pointer;font-size:16px;font-weight:600;transition:background .3s;flex-shrink:0;width:100%}#privacy-banner button:hover{background:#5f4bd8}@media (max-width:480px){#privacy-banner{width:calc(100% - 30px);max-height:90vh;padding:15px;top:50%;transform:translate(-50%,-50%)}#privacy-banner h3{font-size:16px}#privacy-banner p{font-size:12px;margin:6px 0}#privacy-banner button{margin-top:12px;padding:10px 20px;font-size:14px}}#privacy-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:1999}#footer{position:fixed;bottom:0;left:0;right:0;background:rgba(255,255,255,.95);padding:8px 20px;text-align:center;font-size:12px;color:#2d3436;backdrop-filter:blur(10px);z-index:997;box-shadow:0 -2px 10px rgba(0,0,0,.1);transition:bottom .3s ease}#footer a{color:#3498db;text-decoration:none;transition:color .3s}#footer a:hover{color:#2980b9;text-decoration:underline}#footer .footer-line{margin:2px 0;line-height:1.3}#footer .footer-line:first-child{margin-bottom:4px}@media (max-width:768px){#app-title{font-size:12px;padding:12px 15px;min-height:50px}#app-title .info-badge{width:16px;height:16px;line-height:16px;font-size:11px;margin-left:6px}#app-title .tooltip{width:95%;max-width:none;font-size:12px;padding:12px 15px}#instructions{top:50px}#footer{font-size:11px;padding:6px 15px}#footer .footer-line{margin:1px 0}}@media (max-width:480px),(max-height:600px){:root{--site-scale:0.7}}@media (max-width:768px) and (max-height:700px){:root{--site-scale:0.7}}</style></head><body><div id="app-title"><span class="title-text">Herramienta de psicoeducaci√≥n y autorregulaci√≥n emocional para el TOC</span> <span class="info-badge" id="info-badge">?</span><div class="tooltip" id="info-tooltip">Herramienta de psicoeducaci√≥n y autorregulaci√≥n emocional orientada al Trastorno Obsesivo-Compulsivo (TOC), basada en andamiaje cognitivo y navegaci√≥n por estados internos, implementada como interfaz digital no cl√≠nica de apoyo personal, complementaria ‚Äîno sustitutiva‚Äî al tratamiento profesional.</div></div><div id="privacy-overlay"></div><div id="privacy-banner"><div class="privacy-content"><h3>üîí Privacidad y Seguridad</h3><p><span class="warning-icon">‚ö†Ô∏è</span> <strong>Almacenamiento Local:</strong> Toda tu informaci√≥n personal y el contexto de la conversaci√≥n se guarda <strong>exclusivamente en tu navegador</strong> (localStorage). Nada de este historial se almacena de forma persistente en nuestros servidores remotos.</p><p><span class="warning-icon">üõ°Ô∏è</span> <strong>Tratamiento de Datos (GDPR):</strong> Procesamos tus mensajes de forma ef√≠mera para proporcionar t√©cnicas de afrontamiento. Seguimos los principios de transparencia y minimizaci√≥n de datos del <strong>GDPR</strong>. Tienes control total para borrar tus datos limpiando el cach√© de tu navegador.</p><p><span class="warning-icon">üö´</span> <strong>Aviso sobre HIPAA:</strong> Este sistema es una herramienta de apoyo no cl√≠nica y <strong>NO cumple con el est√°ndar HIPAA</strong>. No debe utilizarse para procesar informaci√≥n de salud protegida (PHI) en contextos m√©dicos formales.</p><p><span class="warning-icon">üö®</span> <strong>No es un servicio de emergencias:</strong> Si est√°s en peligro inmediato o tienes pensamientos de autolesi√≥n, contacta servicios de emergencia: <strong>112 (Espa√±a) o 911 (EE.UU.)</strong>.</p><p style="font-size:11px;color:#7f8c8d;margin-top:15px;text-align:center;border-top:1px solid #eee;padding-top:10px">Al hacer clic en aceptar, confirmas que entiendes el car√°cter informativo y no m√©dico de esta herramienta.</p></div><button onclick="acceptPrivacy()">Entiendo y Acepto</button></div><div id="instructions" class="hidden-ui"><h3>Soporte en Crisis TOC</h3><p>Selecciona una emocion o escribe un mensaje para recibir apoyo</p></div><div id="game-container"></div><div id="chat-panel" class="hidden-ui"><div id="chat-header" onclick="toggleChat()">Asistente TOC <span id="selected-emotion"></span> <span id="connection-status">Listo</span> <span class="toggle-icon">‚ñº</span></div><div id="chat-messages"><div class="chat-message bot-message"><div class="message-content">Hola! Estoy aqui para apoyarte. Puedes seleccionar una emocion o escribirme directamente como te sientes.</div></div></div><div id="chat-loading"><span class="loading-spinner"></span> <span>Procesando tu mensaje...</span></div><div id="chat-input-container"><input id="chat-input" placeholder="Escribe tu mensaje..."/> <button id="chat-send-btn">Enviar</button></div></div><footer id="footer"><div class="footer-line">¬© 2025 Soporte en Crisis TOC - LLMs. Creado con ‚ù§Ô∏è por <a href="https://stivenson.github.io/" target="_blank" rel="noopener noreferrer">@stivenson</a></div><div class="footer-line"><a href="mailto:stivenson.rpm@gmail.com">stivenson.rpm@gmail.com</a></div></footer><script src="js/emotion_game_v2.js?v=1.0.8"></script><script>const infoBadge=document.getElementById("info-badge"),infoTooltip=document.getElementById("info-tooltip");let tooltipTimeout=null;const closeTooltip=()=>{infoTooltip.classList.remove("show"),tooltipTimeout&&(clearTimeout(tooltipTimeout),tooltipTimeout=null)},showTooltip=()=>{infoTooltip.classList.add("show"),tooltipTimeout&&clearTimeout(tooltipTimeout),tooltipTimeout=setTimeout(()=>{closeTooltip()},6e3)};infoBadge&&infoTooltip&&(infoBadge.addEventListener("mouseenter",()=>{showTooltip()}),infoBadge.addEventListener("click",()=>{infoTooltip.classList.contains("show")?closeTooltip():showTooltip()}),infoTooltip.addEventListener("mouseleave",()=>{closeTooltip()}),document.addEventListener("click",o=>{infoBadge.contains(o.target)||infoTooltip.contains(o.target)||closeTooltip()}));</script></body></html>