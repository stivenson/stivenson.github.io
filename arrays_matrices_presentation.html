<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrays y Matrices - Sistema de Ecuaciones</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
            max-width: 100%;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            max-width: 100%;
        }

        .container {
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
            max-width: 100vw;
        }

        /* Sidebar */
        .sidebar {
            width: 320px;
            background: rgba(255, 255, 255, 0.82);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar.collapsed {
            transform: translateX(-320px);
        }

        .sidebar-header {
            padding: 20px;
            /* Fondo lo maneja Vanta.js */
            background: none;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .sidebar-header > * {
            position: relative;
            z-index: 1;
        }

        .sidebar-header h2 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: white;
        }

        .sidebar-header p {
            color: white;
        }

        .menu-items {
            padding: 10px 0;
        }

        .menu-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .menu-item:hover {
            background: rgba(102, 126, 234, 0.1);
            border-left-color: #667eea;
        }

        .menu-item.active {
            background: rgba(102, 126, 234, 0.15);
            border-left-color: #667eea;
            font-weight: 600;
        }

        .menu-item .icon {
            font-size: 1.3rem;
            min-width: 25px;
        }

        .menu-item .text {
            flex: 1;
            font-size: 0.95rem;
        }

        /* Highlight del men√∫ de Juego/Evaluaci√≥n */
        .quiz-highlight,
        .menu-item.active.quiz-highlight {
            background: rgba(255, 215, 64, 0.30); /* amarillo sutil */
            border-left-color: #f1c40f;
            animation: quizPulse 1.6s ease-in-out infinite;
        }
        .quiz-highlight .text {
            font-size: 0.85rem;
        }
        .quiz-highlight:hover { background: rgba(255, 215, 64, 0.38); }
        @keyframes quizPulse {
            0%, 100% { transform: scale(0.9); } /* -10% del tama√±o normal */
            50% { transform: scale(1.0); } /* Tama√±o normal como m√°ximo */
        }

        /* Main content */
        .main-content {
            flex: 1;
            margin-left: 320px;
            transition: margin-left 0.3s ease;
            padding: 20px;
            overflow-x: hidden;
            max-width: calc(100vw - 320px);
        }

        .main-content.expanded {
            margin-left: 0;
            max-width: 100vw;
        }

        /* Toggle button */
        .menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .menu-toggle:hover {
            transform: scale(1.1);
        }

        /* Content panel */
        .content-panel {
            background: rgba(255, 255, 255, 0.76);
            border-radius: 15px;
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative; /* para anclar footer interno */
            padding-bottom: 110px; /* espacio para footer */
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2rem;
        }

        h2 {
            color: #764ba2;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        h3 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        p {
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
        }

        .example-box {
            background: rgba(248, 249, 250, 0.78);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .code-box {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }

        .matrix-display {
            font-family: monospace;
            background: rgba(248, 249, 250, 0.78);
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            text-align: center;
        }

        /* Inicio - badges de meta (materia y profesor) */
        .hero-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0 20px 0;
        }
        .badge {
            background: rgba(102, 126, 234, 0.12);
            color: #3f51b5;
            border: 1px solid #667eea;
            padding: 8px 14px;
            border-radius: 999px;
            font-weight: 600;
            letter-spacing: 0.2px;
        }
        .badge-alt {
            background: rgba(118, 75, 162, 0.12);
            color: #764ba2;
            border-color: #764ba2;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
        }

        /* Quiz styles */
        .quiz-option {
            padding: 8px 10px;
            border-radius: 8px;
        }
        .quiz-option.correct { background: rgba(76, 175, 80, 0.15); border-left: 4px solid #4caf50; }
        .quiz-option.incorrect { background: rgba(244, 67, 54, 0.15); border-left: 4px solid #f44336; }
        .quiz-score {
            margin: 18px auto 0 auto;
            background: rgba(255, 215, 64, 0.30);
            border: 2px solid #f1c40f;
            color: #6b5d00;
            padding: 20px 28px;
            border-radius: 16px;
            font-weight: 800;
            font-size: 1.25rem;
            display: block;
            width: fit-content;
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            animation: quizPulseScore 1s ease-in-out infinite;
        }

        @keyframes quizPulseScore {
            0%, 100% { transform: scale(0.9); } /* -10% del tama√±o normal */
            50% { transform: scale(1.0); } /* Tama√±o normal como m√°ximo */
        }

        #quiz-result { text-align: center; }

        .timer-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 193, 7, 0.18);
            border: 1px solid #ffca2c;
            color: #8a6d00;
            padding: 8px 12px;
            border-radius: 10px;
            font-weight: 700;
        }

        /* Estado deshabilitado del bot√≥n del quiz */
        #quiz-section button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            filter: saturate(0.7);
        }

        /* Modal del quiz */
        .quiz-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        .quiz-modal {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 460px;
            width: 90%;
            box-shadow: 0 16px 48px rgba(0,0,0,0.25);
            text-align: center;
        }
        .quiz-modal h3 {
            color: #667eea;
            font-size: 1.5rem;
            margin-bottom: 14px;
        }
        .quiz-modal p {
            color: #333;
            margin-bottom: 24px;
            font-size: 1.05rem;
        }
        .quiz-modal button {
            padding: 14px 24px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .quiz-modal button:hover {
            transform: scale(1.04);
        }

        /* Footer dentro del panel de contenido */
        .global-panel-footer {
            position: absolute;
            left: 50%;
            bottom: 20px;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.85);
            border-radius: 12px;
            padding: 10px 14px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        }
        .global-panel-footer img { height: 42px; }

        /* Footer al final del men√∫ lateral */
        .sidebar-footer {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 12px;
            padding: 12px 10px;
            margin: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        }
        .sidebar-footer img { height: 36px; }

        /* Fullscreen animated background container (Vanta.js) */
        #vanta-bg {
            position: fixed;
            inset: 0;
            z-index: -1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                width: 100vw;
                max-width: 100vw;
            }

            .sidebar {
                transform: translateX(-320px);
            }

            .sidebar.collapsed {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0 !important;
                max-width: 100vw !important;
                width: 100vw;
                padding: 15px;
            }

            .main-content.expanded {
                margin-left: 0 !important;
                max-width: 100vw !important;
                width: 100vw;
            }

            .menu-toggle {
                display: flex;
            }

            .content-panel {
                padding: 20px;
                padding-bottom: 140px; /* M√°s espacio para el footer en m√≥viles */
                max-width: 100%;
                width: 100%;
                margin: 0;
                box-sizing: border-box;
            }

            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.3rem;
            }
        }
    </style>
    <!-- Highlight.js styles -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <style>
        /* Ajuste de color para comentarios en bloques de c√≥digo (m√°s claro) */
        .hljs-comment, .hljs-quote { color: #b0b0b0; }
    </style>
    <!-- three.js + Vanta.js WAVES for animated background -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.waves.min.js"></script>
</head>
<body>
    <div id="vanta-bg"></div>
    <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>

    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header" id="menu-banner">
                <h2>üìö Navegaci√≥n</h2>
                <p style="font-size: 0.9rem; margin-top: 5px;">Arrays y Matrices</p>
            </div>
            <nav class="menu-items">
                <div class="menu-item active" onclick="showSection(0)">
                    <span class="icon">üè†</span>
                    <span class="text">Inicio</span>
                </div>
                <div class="menu-item" onclick="showSection(1)">
                    <span class="icon">üìò</span>
                    <span class="text">Introducci√≥n</span>
                </div>
                <div class="menu-item" onclick="showSection(2)">
                    <span class="icon">üìä</span>
                    <span class="text">¬øQu√© es un Array?</span>
                </div>
                <div class="menu-item" onclick="showSection(3)">
                    <span class="icon">üî¢</span>
                    <span class="text">¬øQu√© es una Matriz?</span>
                </div>
                <div class="menu-item" onclick="showSection(4)">
                    <span class="icon">üéØ</span>
                    <span class="text">Nuestro Problema</span>
                </div>
                <div class="menu-item" onclick="showSection(5)">
                    <span class="icon">üßÆ</span>
                    <span class="text">Creando la Matriz</span>
                </div>
                <div class="menu-item" onclick="showSection(6)">
                    <span class="icon">üìù</span>
                    <span class="text">Creando el Array</span>
                </div>
                <div class="menu-item" onclick="showSection(7)">
                    <span class="icon">üîÑ</span>
                    <span class="text">Operaciones B√°sicas</span>
                </div>
                <div class="menu-item" onclick="showSection(8)">
                    <span class="icon">üîÄ</span>
                    <span class="text">Transpuesta</span>
                </div>
                <div class="menu-item" onclick="showSection(9)">
                    <span class="icon">‚úñÔ∏è</span>
                    <span class="text">Producto Matricial</span>
                </div>
                <div class="menu-item" onclick="showSection(10)">
                    <span class="icon">üéì</span>
                    <span class="text">M√©todo de Cramer</span>
                </div>
                <div class="menu-item quiz-highlight" onclick="showSection(11)">
                    <span class="icon">üéÆ</span>
                    <span class="text">Juego/Evaluaci√≥n</span>
                </div>
                <div class="menu-item" onclick="showSection(12)">
                    <span class="icon">‚úÖ</span>
                    <span class="text">Conclusiones</span>
                </div>
            </nav>
            <div class="sidebar-footer">
                <img src="https://www.unisimon.edu.co/cucuta/recursos/img/unisimon-logo-50-year.png" alt="Logo Universidad Sim√≥n Bol√≠var">
            </div>
        </aside>

        <main class="main-content" id="mainContent">
            <div class="content-panel">
                <div class="global-panel-footer" aria-label="Universidad Sim√≥n Bol√≠var">
                    <img src="https://www.unisimon.edu.co/cucuta/recursos/img/unisimon-logo-50-year.png" alt="Logo Universidad Sim√≥n Bol√≠var">
                </div>
                <!-- Secci√≥n 0: Inicio / Portada -->
                <section class="content-section active">
                    <h1>Arrays y Matrices</h1>
                    <p style="margin-bottom: 25px;">Presentaci√≥n del tema y equipo de trabajo</p>
                    <div class="hero-meta">
                        <span class="badge">Algoritmia</span>
                        <span class="badge badge-alt">Profesor: Ing. Wilson</span>
                    </div>
                    <div class="example-box" style="max-width: 520px;">
                        <h3>Integrantes</h3>
                        <p>‚Ä¢ Cesar</p>
                        <p>‚Ä¢ Mauricio</p>
                        <p>‚Ä¢ Stivenson</p>
                    </div>
                </section>
                <!-- Secci√≥n 1: Introducci√≥n -->
                <section class="content-section">
                    <h1>üéì Arrays y Matrices en Programaci√≥n</h1>
                    <p>Bienvenido a esta presentaci√≥n interactiva donde exploraremos los conceptos fundamentales de arrays y matrices a trav√©s de un ejemplo pr√°ctico: <span class="highlight">resolver un sistema de ecuaciones lineales</span> usando el M√©todo de Cramer.</p>
                    
                    <div class="example-box">
                        <h3>üìã Lo que aprender√°s:</h3>
                        <p>‚úì Conceptos fundamentales de arrays y matrices</p>
                        <p>‚úì Diferencias entre listas de Python y arrays</p>
                        <p>‚úì Representaci√≥n en memoria</p>
                        <p>‚úì Operaciones b√°sicas (suma, resta, multiplicaci√≥n)</p>
                        <p>‚úì Transpuesta y producto matricial</p>
                        <p>‚úì Aplicaci√≥n pr√°ctica con el M√©todo de Cramer</p>
                    </div>

                    <h2>üéØ Nuestro Caso de Estudio</h2>
                    <p>Utilizaremos un sistema de ecuaciones que modela variables relacionadas con el aire (cobertura vegetal, temperatura ambiental, etc.) para entender c√≥mo los arrays y matrices nos ayudan a resolver problemas reales.</p>
                </section>

                <!-- Secci√≥n 1: ¬øQu√© es un Array? -->
                <section class="content-section">
                    <h1>üìä ¬øQu√© es un Array?</h1>
                    
                    <h2>Definici√≥n desde la Programaci√≥n</h2>
                    <p>Un <span class="highlight">array</span> es una estructura de datos que almacena una colecci√≥n de elementos del mismo tipo en posiciones de memoria contiguas. Cada elemento se accede mediante un √≠ndice num√©rico.</p>

                    <div class="example-box">
                        <h3>üîç Caracter√≠sticas Clave:</h3>
                        <p><strong>‚Ä¢ Tama√±o fijo:</strong> Una vez creado, su tama√±o no cambia</p>
                        <p><strong>‚Ä¢ Tipo homog√©neo:</strong> Todos los elementos son del mismo tipo</p>
                        <p><strong>‚Ä¢ Acceso O(1):</strong> Acceso directo por √≠ndice en tiempo constante</p>
                        <p><strong>‚Ä¢ Memoria contigua:</strong> Los elementos est√°n uno al lado del otro en memoria</p>
                    </div>

                    <h2>¬øC√≥mo se diferencia una lista en Python?</h2>
                    
                    <div class="code-box">
# Lista de Python (din√°mica, heterog√©nea)
lista = [1, "texto", 3.14, True]
lista.append(5)  # Puede crecer

# Array de NumPy (fijo, homog√©neo)
import numpy as np
array = np.array([1, 2, 3, 4, 5])
# array.append(6)  ‚ùå No existe este m√©todo
                    </div>

                    <p><strong>Diferencias principales:</strong></p>
                    <p>‚Ä¢ Las <span class="highlight">listas de Python</span> son din√°micas (pueden crecer/decrecer) y heterog√©neas (pueden contener diferentes tipos)</p>
                    <p>‚Ä¢ Los <span class="highlight">arrays</span> tienen tama√±o fijo y tipo homog√©neo, lo que los hace m√°s eficientes</p>

                    <h2>Ventajas en Rendimiento y Memoria</h2>
                    <div class="example-box">
                        <p><strong>‚ö° Rendimiento:</strong> Los arrays son hasta 50x m√°s r√°pidos para operaciones matem√°ticas debido a:</p>
                        <p>- Operaciones vectorizadas (procesamiento en paralelo)</p>
                        <p>- No necesitan verificar el tipo de cada elemento</p>
                        <p>- Mejor uso del cach√© del procesador</p>
                        <br>
                        <p><strong>üíæ Memoria:</strong> Usan menos memoria porque:</p>
                        <p>- Solo almacenan los valores (no metadatos adicionales)</p>
                        <p>- Ocupan posiciones contiguas (sin punteros entre elementos)</p>
                    </div>
                </section>

                <!-- Secci√≥n 2: ¬øQu√© es una Matriz? -->
                <section class="content-section">
                    <h1>üî¢ ¬øQu√© es una Matriz?</h1>
                    
                    <h2>Desde la Perspectiva de la Programaci√≥n</h2>
                    <p>Una <span class="highlight">matriz</span> es un array bidimensional (o multidimensional) que organiza los datos en filas y columnas. Es esencialmente un "array de arrays".</p>

                    <div class="code-box">
# Matriz 3x3 en Python con NumPy
matriz = np.array([
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
])

# Acceso: matriz[fila][columna]
elemento = matriz[0][1]  # Devuelve 2
                    </div>

                    <h2>Desde la Perspectiva del √Ålgebra Lineal</h2>
                    <p>En √°lgebra lineal, una matriz es una tabla rectangular de n√∫meros, s√≠mbolos o expresiones, organizados en filas y columnas. Se utiliza para representar:</p>
                    <p>‚Ä¢ Sistemas de ecuaciones lineales</p>
                    <p>‚Ä¢ Transformaciones lineales</p>
                    <p>‚Ä¢ Datos estructurados en an√°lisis estad√≠stico</p>

                    <div class="matrix-display">
                        <strong>Matriz A (3√ó3):</strong><br><br>
                        ‚é° a‚ÇÅ‚ÇÅ  a‚ÇÅ‚ÇÇ  a‚ÇÅ‚ÇÉ ‚é§<br>
                        ‚é¢ a‚ÇÇ‚ÇÅ  a‚ÇÇ‚ÇÇ  a‚ÇÇ‚ÇÉ ‚é•<br>
                        ‚é£ a‚ÇÉ‚ÇÅ  a‚ÇÉ‚ÇÇ  a‚ÇÉ‚ÇÉ ‚é¶
                    </div>

                    <h2>¬øC√≥mo se representa una Matriz en Memoria?</h2>
                    <div class="example-box">
                        <h3>Dos formas principales:</h3>
                        <p><strong>1. Row-major (por filas):</strong> Usado por NumPy y C</p>
                        <div class="code-box">
# Matriz 2x3: [[1,2,3], [4,5,6]]
# Memoria: [1, 2, 3, 4, 5, 6]
                        </div>
                        
                        <p><strong>2. Column-major (por columnas):</strong> Usado por Fortran y MATLAB</p>
                        <div class="code-box">
# Matriz 2x3: [[1,2,3], [4,5,6]]
# Memoria: [1, 4, 2, 5, 3, 6]
                        </div>
                    </div>

                    <h2>Diferencia entre Matriz y Array Bidimensional</h2>
                    <p>En programaci√≥n, los t√©rminos suelen usarse indistintamente, pero existe una diferencia conceptual:</p>
                    <p>‚Ä¢ <strong>Array bidimensional:</strong> Estructura de datos general para almacenar informaci√≥n en 2D</p>
                    <p>‚Ä¢ <strong>Matriz:</strong> Array bidimensional con operaciones matem√°ticas definidas (suma, multiplicaci√≥n, determinante, inversa, etc.)</p>
                    <p>Una matriz es un array bidimensional con <span class="highlight">√°lgebra matricial</span> implementada.</p>
                </section>

                <!-- Secci√≥n 3: Nuestro Problema -->
                <section class="content-section">
                    <h1>üéØ Nuestro Problema: Sistema de Ecuaciones</h1>
                    
                    <p>Vamos a resolver el siguiente sistema de ecuaciones lineales que modela variables ambientales del aire:</p>

                    <div class="matrix-display">
                        <strong>Sistema de Ecuaciones:</strong><br><br>
                        2x + y + z = 10<br>
                        x - 3y + 2z = 5<br>
                        3x + 2y + 4z = 20
                    </div>

                    <h2>üìã Significado de las Variables</h2>
                    <div class="example-box">
                        <p><strong>x:</strong> Nivel de contaminaci√≥n del aire</p>
                        <p><strong>y:</strong> Cobertura vegetal o a√©rea verde</p>
                        <p><strong>z:</strong> Temperatura ambiental promedio diaria</p>
                    </div>

                    <h2>üîç ¬øPor qu√© usar Arrays y Matrices?</h2>
                    <p>Este sistema se puede representar en forma matricial como <strong>Ax = b</strong>, donde:</p>
                    <p>‚Ä¢ <strong>A</strong> es la matriz de coeficientes (3√ó3)</p>
                    <p>‚Ä¢ <strong>x</strong> es el array de inc√≥gnitas (3√ó1)</p>
                    <p>‚Ä¢ <strong>b</strong> es el array de t√©rminos independientes (3√ó1)</p>

                    <div class="matrix-display">
                        <strong>Representaci√≥n Matricial:</strong><br><br>
                        ‚é° 2   1   1 ‚é§   ‚é° x ‚é§   ‚é° 10 ‚é§<br>
                        ‚é¢ 1  -3   2 ‚é• √ó ‚é¢ y ‚é• = ‚é¢  5 ‚é•<br>
                        ‚é£ 3   2   4 ‚é¶   ‚é£ z ‚é¶   ‚é£ 20 ‚é¶
                    </div>

                    <p>Esta representaci√≥n nos permite usar herramientas del √°lgebra lineal, como el <span class="highlight">M√©todo de Cramer</span>, para encontrar la soluci√≥n.</p>
                </section>

                <!-- Secci√≥n 4: Creando la Matriz -->
                <section class="content-section">
                    <h1>üßÆ Creando la Matriz de Coeficientes</h1>
                    
                    <h2>Paso 1: Identificar los Coeficientes</h2>
                    <p>De nuestro sistema de ecuaciones, extraemos los coeficientes de cada variable:</p>

                    <div class="example-box">
                        <p>Ecuaci√≥n 1: <strong>2</strong>x + <strong>1</strong>y + <strong>1</strong>z = 10</p>
                        <p>Ecuaci√≥n 2: <strong>1</strong>x + <strong>(-3)</strong>y + <strong>2</strong>z = 5</p>
                        <p>Ecuaci√≥n 3: <strong>3</strong>x + <strong>2</strong>y + <strong>4</strong>z = 20</p>
                    </div>

                    <h2>Paso 2: Crear la Matriz en Python</h2>
                    <div class="code-box">
import numpy as np

# Matriz A: coeficientes del sistema
A = np.array([
    [2,  1,  1],   # Coeficientes de la ecuaci√≥n 1
    [1, -3,  2],   # Coeficientes de la ecuaci√≥n 2
    [3,  2,  4]    # Coeficientes de la ecuaci√≥n 3
])

print("Matriz de coeficientes A:")
print(A)
# [[2  1  1]
#  [1 -3  2]
#  [3  2  4]]
                    </div>

                    <h2>Paso 3: Accediendo a los Elementos</h2>
                    <div class="code-box">
# Acceso por √≠ndice [fila, columna] (comienza en 0)
coef_x_eq1 = A[0, 0]  # 2 (fila 0, columna 0)
coef_y_eq2 = A[1, 1]  # -3 (fila 1, columna 1)
coef_z_eq3 = A[2, 2]  # 4 (fila 2, columna 2)

# Acceder a una fila completa
ecuacion_1 = A[0, :]  # [2, 1, 1]

# Acceder a una columna completa
coeficientes_de_y = A[:, 1]  # [1, -3, 2]
                    </div>

                    <h2>üéØ Propiedades de Nuestra Matriz</h2>
                    <div class="example-box">
                        <p><strong>Dimensi√≥n:</strong> 3√ó3 (3 filas, 3 columnas)</p>
                        <p><strong>Tipo:</strong> Matriz cuadrada</p>
                        <p><strong>Tipo de datos:</strong> int64 (enteros de 64 bits)</p>
                        <p><strong>Tama√±o en memoria:</strong> 9 elementos √ó 8 bytes = 72 bytes</p>
                    </div>
                </section>

                <!-- Secci√≥n 5: Creando el Array -->
                <section class="content-section">
                    <h1>üìù Creando el Array de T√©rminos Independientes</h1>
                    
                    <h2>Paso 1: Identificar los T√©rminos Independientes</h2>
                    <p>Los t√©rminos independientes son los valores del lado derecho de cada ecuaci√≥n:</p>

                    <div class="example-box">
                        <p>Ecuaci√≥n 1: 2x + y + z = <strong>10</strong></p>
                        <p>Ecuaci√≥n 2: x - 3y + 2z = <strong>5</strong></p>
                        <p>Ecuaci√≥n 3: 3x + 2y + 4z = <strong>20</strong></p>
                    </div>

                    <h2>Paso 2: Crear el Array en Python</h2>
                    <div class="code-box">
# Array b: t√©rminos independientes
b = np.array([10, 5, 20])

print("Array de t√©rminos independientes b:")
print(b)
# [10  5 20]

print(f"\nDimensi√≥n: {b.shape}")  # (3,)
print(f"Tama√±o: {b.size} elementos")  # 3
                    </div>

                    <h2>Paso 3: ¬øPor qu√© un Array Unidimensional?</h2>
                    <p>Un array unidimensional es perfecto para almacenar una secuencia simple de valores. En nuestro caso:</p>
                    <div class="example-box">
                        <p><strong>Ventajas:</strong></p>
                        <p>‚Ä¢ Acceso directo por √≠ndice: <code>b[0]</code> ‚Üí 10</p>
                        <p>‚Ä¢ Memoria eficiente: solo 24 bytes (3 √ó 8 bytes)</p>
                        <p>‚Ä¢ Compatible con operaciones vectorizadas</p>
                        <p>‚Ä¢ Se puede expandir a columna cuando sea necesario</p>
                    </div>

                    <h2>Paso 4: Accediendo a los Elementos</h2>
                    <div class="code-box">
# Acceso individual
termino_eq1 = b[0]  # 10
termino_eq2 = b[1]  # 5
termino_eq3 = b[2]  # 20

# Slicing (rodajas)
primeros_dos = b[:2]   # [10, 5]
ultimos_dos = b[1:]    # [5, 20]

# Modificaci√≥n
b_copia = b.copy()
b_copia[1] = 15  # Cambiar el segundo elemento
                    </div>

                    <h2>üîç Array vs Lista de Python</h2>
                    <div class="code-box">
# Lista de Python
lista_python = [10, 5, 20]
lista_python.append(25)  # ‚úÖ Puede crecer

# Array de NumPy
array_numpy = np.array([10, 5, 20])
# array_numpy.append(25)  # ‚ùå Error!
# Debe crear uno nuevo:
array_nuevo = np.append(array_numpy, 25)  # [10  5 20 25]
                    </div>
                </section>

                <!-- Secci√≥n 6: Operaciones B√°sicas -->
                <section class="content-section">
                    <h1>üîÑ Operaciones B√°sicas con Arrays y Matrices</h1>
                    
                    <h2>Operaciones entre Arrays del Mismo Tama√±o</h2>
                    <p>Cuando dos arrays tienen las mismas dimensiones, podemos realizar operaciones <span class="highlight">elemento a elemento</span>:</p>

                    <div class="code-box">
# Crear dos arrays del mismo tama√±o
a1 = np.array([1, 2, 3])
a2 = np.array([4, 5, 6])

# Suma elemento a elemento
suma = a1 + a2  # [5, 7, 9]

# Resta elemento a elemento
resta = a1 - a2  # [-3, -3, -3]

# Multiplicaci√≥n elemento a elemento
producto = a1 * a2  # [4, 10, 18]

# Divisi√≥n elemento a elemento
division = a2 / a1  # [4.0, 2.5, 2.0]

# Potencia elemento a elemento
potencia = a1 ** 2  # [1, 4, 9]
                    </div>

                    <h2>Ejemplo con Nuestros Datos</h2>
                    <p>Supongamos que queremos crear un segundo escenario con diferentes t√©rminos independientes:</p>

                    <div class="code-box">
# T√©rminos independientes del escenario 1
b1 = np.array([10, 5, 20])

# T√©rminos independientes del escenario 2
b2 = np.array([15, 10, 25])

# Diferencia entre escenarios
diferencia = b2 - b1  # [5, 5, 5]

# Promedio de ambos escenarios
promedio = (b1 + b2) / 2  # [12.5, 7.5, 22.5]
                    </div>

                    <h2>Operaciones entre Matrices del Mismo Tama√±o</h2>
                    <div class="code-box">
# Dos matrices 2√ó2
M1 = np.array([[1, 2], [3, 4]])
M2 = np.array([[5, 6], [7, 8]])

# Suma de matrices
suma_matrices = M1 + M2
# [[ 6  8]
#  [10 12]]

# Multiplicaci√≥n elemento a elemento (NO es producto matricial)
mult_elemento = M1 * M2
# [[ 5 12]
#  [21 32]]
                    </div>

                    <h2>¬øQu√© sucede si operamos un Array con una Matriz?</h2>
                    <div class="example-box">
                        <p><strong>¬øEs posible?</strong> S√≠, bajo ciertas condiciones, gracias al <span class="highlight">broadcasting</span> de NumPy.</p>
                        <p><strong>Broadcasting:</strong> NumPy autom√°ticamente expande las dimensiones del array m√°s peque√±o para que coincidan.</p>
                    </div>

                    <div class="code-box">
# Matriz 3√ó3
A = np.array([[2, 1, 1], [1, -3, 2], [3, 2, 4]])

# Array 1D
v = np.array([1, 2, 3])

# Suma: el array se suma a cada fila
resultado = A + v
# [[3 3 4]
#  [2 -1 5]
#  [4 4 7]]

# Multiplicaci√≥n elemento a elemento
resultado2 = A * v
# [[2 2 3]
#  [1 -6 6]
#  [3 4 12]]
                    </div>

                    <h2>‚ö†Ô∏è Condiciones para Broadcasting</h2>
                    <div class="example-box">
                        <p>Las dimensiones son compatibles cuando:</p>
                        <p>1. Son iguales, o</p>
                        <p>2. Una de ellas es 1</p>
                        <br>
                        <p>Ejemplos v√°lidos:</p>
                        <p>‚Ä¢ (3,
                </section>

                <!-- Secci√≥n 7+1: Transpuesta -->
                <section class="content-section">
                    <h1>üîÄ Transpuesta</h1>
                    <p>La <span class="highlight">transpuesta</span> de una matriz A, denotada A·µÄ, se obtiene intercambiando filas por columnas.</p>
                    <div class="code-box">
# Ejemplo con NumPy
import numpy as np
A = np.array([[1, 2, 3], [4, 5, 6]])
AT = A.T
# AT = [[1, 4], [2, 5], [3, 6]]
                    </div>
                </section>

                <!-- Secci√≥n 7+2: Producto Matricial -->
                <section class="content-section">
                    <h1>‚úñÔ∏è Producto Matricial</h1>
                    <p>El producto de matrices (A¬∑B) est√° definido cuando las columnas de A coinciden con las filas de B.</p>
                    <div class="code-box">
# Producto matricial con NumPy
import numpy as np
A = np.array([[1, 2], [3, 4]])
B = np.array([[5, 6], [7, 8]])
C = A @ B
# C = [[19, 22], [43, 50]]
                    </div>
                </section>

                <!-- Secci√≥n 7+3: M√©todo de Cramer -->
                <section class="content-section">
                    <h1>üéì M√©todo de Cramer</h1>
                    <p>Para sistemas cuadrados Ax=b con det(A)‚â†0, cada inc√≥gnita se obtiene reemplazando su columna por b y dividiendo por det(A).</p>
                    <div class="code-box">
# Cramer con NumPy
import numpy as np
A = np.array([[2,1,1],[1,-3,2],[3,2,4]])
b = np.array([10,5,20])
detA = np.linalg.det(A)
x = np.linalg.solve(A, b)  # Soluci√≥n equivalente
print(x)
                    </div>
                </section>

                <!-- Secci√≥n 7+3.5: Juego/Evaluaci√≥n -->
                <section class="content-section" id="quiz-section">
                    <div id="quiz-modal-overlay" class="quiz-modal-overlay" style="display:none;">
                        <div class="quiz-modal">
                            <h3>‚è±Ô∏è Tiempo L√≠mite</h3>
                            <p>Tienes 2 minutos para responder estas diez preguntas</p>
                            <button onclick="closeQuizModal()">üöÄ Empieza ya, el tiempo ya esta corriendo</button>
                        </div>
                    </div>
                    <h1>üéÆ Juego/Evaluaci√≥n</h1>
                    <p>Responde 10 preguntas aleatorias sobre arrays, matrices, NumPy y el contenido visto. Al finalizar ver√°s tu puntaje.</p>
                    <div style="display:flex; gap:10px; margin:10px 0 20px 0; align-items:center;">
                        <button onclick="generateQuiz()" style="padding:10px 14px; border-radius:8px; border:1px solid #667eea; background:#fff; color:#3f51b5; cursor:pointer;">üîÅ Nuevas preguntas</button>
                        <div id="quiz-timer" class="timer-badge" aria-live="polite">‚è≥ 120 s</div>
                    </div>
                    <div id="quiz-container" class="example-box" style="background: rgba(248, 249, 250, 0.78);"></div>
                    <div id="quiz-result" style="margin-top:12px; font-weight:600;"></div>
                </section>

                <!-- Secci√≥n 7+4: Conclusiones -->
                <section class="content-section">
                    <h1>‚úÖ Conclusiones</h1>
                    <p>Repasamos arrays y matrices, operaciones clave y un caso pr√°ctico de resoluci√≥n de sistemas lineales.</p>
                </section>
            
        <!-- Highlight.js library -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <script>
            var QUIZ_INDEX = 11; // √≠ndice del men√∫ para Juego/Evaluaci√≥n
            function showSection(index) {
                var sections = document.querySelectorAll('.content-section');
                var menuItems = document.querySelectorAll('.menu-item');

                if (!sections.length || index < 0 || index >= sections.length) {
                    return;
                }

                sections.forEach(function (s) { s.classList.remove('active'); });
                menuItems.forEach(function (m) { m.classList.remove('active'); });

                sections[index].classList.add('active');
                if (menuItems[index]) {
                    menuItems[index].classList.add('active');
                }

                window.scrollTo({ top: 0, behavior: 'smooth' });

                // Cerrar men√∫ hamburguesa en m√≥vil al seleccionar opci√≥n
                if (window.innerWidth <= 768) {
                    var sidebar = document.getElementById('sidebar');
                    var main = document.getElementById('mainContent');
                    if (sidebar && !sidebar.classList.contains('collapsed')) {
                        sidebar.classList.add('collapsed');
                        main.classList.add('expanded');
                    }
                }

                if (index === QUIZ_INDEX) {
                    generateQuiz(false); // generar preguntas sin iniciar timer
                    showQuizModal(); // mostrar modal
                }
            }

            function toggleMenu() {
                var sidebar = document.getElementById('sidebar');
                var main = document.getElementById('mainContent');
                sidebar.classList.toggle('collapsed');
                main.classList.toggle('expanded');
            }

            // Transform existing .code-box blocks into highlighted Python code blocks
            (function () {
                var boxes = document.querySelectorAll('.code-box');
                boxes.forEach(function (box) {
                    var codeText = box.textContent.trim();
                    var pre = document.createElement('pre');
                    var code = document.createElement('code');
                    code.className = 'language-python';
                    code.textContent = codeText;
                    pre.appendChild(code);
                    box.innerHTML = '';
                    box.appendChild(pre);
                });
                if (window.hljs && typeof window.hljs.highlightAll === 'function') {
                    window.hljs.highlightAll();
                }
            })();
        
            // ================== QUIZ ENGINE ==================
            var QUESTION_BANK = [
                { q: 'Un array es...', a: ['Una colecci√≥n de elementos del mismo tipo en memoria contigua', 'Una lista heterog√©nea din√°mica de Python', 'Un diccionario clave-valor', 'Un archivo binario'], i: 0 },
                { q: 'En Python puro, las listas...', a: ['Tienen tama√±o fijo', 'Son heterog√©neas y din√°micas', 'Almacenan en memoria contigua por obligaci√≥n', 'No permiten slicing'], i: 1 },
                { q: 'NumPy almacena sus arrays en memoria...', a: ['Siempre por columnas', 'Siempre aleatoria', 'Usualmente por filas (row-major)', 'Nunca contigua'], i: 2 },
                { q: 'El acceso por √≠ndice en arrays es...', a: ['O(1)', 'O(n)', 'O(log n)', 'No definido'], i: 0 },
                { q: 'La transpuesta de A (A·µÄ) se obtiene...', a: ['Intercambiando filas por columnas', 'Multiplicando por -1', 'Sumando una fila', 'Ordenando'], i: 0 },
                { q: 'El broadcasting en NumPy permite...', a: ['Sumar arrays con dimensiones compatibles', 'Guardar archivos CSV', 'Crear threads', 'Evitar usar √≠ndices'], i: 0 },
                { q: 'Condici√≥n b√°sica de broadcasting:', a: ['Dimensiones iguales o una es 1', 'Solo matrices cuadradas', 'Tipos distintos', 'Memoria no contigua'], i: 0 },
                { q: 'Producto matricial correcto en NumPy:', a: ['A * B', 'A @ B', 'A ** B', 'A + B'], i: 1 },
                { q: 'Para resolver Ax=b de forma directa usamos:', a: ['np.linalg.solve', 'np.append', 'np.split', 'np.argmax'], i: 0 },
                { q: 'En Cramer, el determinante de A debe ser...', a: ['Cero', 'Distinto de cero', 'Negativo', 'Par'], i: 1 },
                { q: 'Una matriz 3x2 tiene...', a: ['3 filas y 2 columnas', '2 filas y 3 columnas', '3 columnas', '2 filas'], i: 0 },
                { q: 'La memoria row-major linealiza...', a: ['Por filas', 'Por columnas', 'Por diagonales', 'Aleatoriamente'], i: 0 },
                { q: 'El m√©todo recomendado para suma elemento a elemento:', a: ['Usar bucles Python', 'Vectorizar con NumPy', 'Map de Python', 'List comprehensions'], i: 1 },
                { q: 'np.array([1,2,3]) + np.array([4,5,6]) =', a: ['[5,7,9]', '[14,25,36]', '[1,2,3,4,5,6]', 'Error'], i: 0 },
                { q: 'A.T en NumPy devuelve...', a: ['Copia siempre', 'Vista transpuesta cuando es posible', 'Una lista', 'Un escalar'], i: 1 },
                { q: 'El s√≠mbolo @ en Python/NumPy representa...', a: ['Concatenaci√≥n', 'Producto matricial', 'Producto elemento a elemento', 'Potencia'], i: 1 },
                { q: 'Una ventaja de arrays sobre listas:', a: ['M√°s metadatos por elemento', 'Menos uso de cach√©', 'Operaciones vectorizadas r√°pidas', 'Tipos mezclados por elemento'], i: 2 },
                { q: 'np.linalg.det(A) calcula...', a: ['La inversa', 'El determinante', 'La transpuesta', 'La norma'], i: 1 },
                { q: 'Para extraer la segunda columna A[:,1] requiere...', a: ['A ser 1D', 'Indexaci√≥n [fila, columna]', 'Slicing por filas √∫nicamente', 'Matrices 4x4'], i: 1 },
                { q: 'Ax=b: x es...', a: ['Vector de inc√≥gnitas', 'Matriz de coeficientes', 'T√©rminos independientes', 'Identidad'], i: 0 },
                { q: 'Una matriz cuadrada es...', a: ['m = n', 'm ‚â† n', 'm > n', 'n > m'], i: 0 },
                { q: 'Para agregar un elemento a un array NumPy...', a: ['append sobre el mismo array', 'np.append creando nuevo array', 'list.append', 'No existe forma'], i: 1 },
                { q: 'El tipo por defecto al crear np.array([1,2,3]) suele ser...', a: ['int64 o plataforma', 'str', 'bool', 'object'], i: 0 },
                { q: 'La operaci√≥n A * B en NumPy (arrays del mismo shape) es...', a: ['Producto matricial', 'Elemento a elemento', 'Concatenaci√≥n', 'Transpuesta'], i: 1 },
                { q: 'Para crear la matriz de coeficientes A usamos...', a: ['np.array([...])', 'np.dict', 'np.series', 'np.map'], i: 0 },
                { q: 'b.shape para b=np.array([10,5,20]) es...', a: ['(3,)', '(3,1)', '(1,3)', '(3,3)'], i: 0 },
                { q: 'AT[i,j] = A[j,i] define...', a: ['Inversa', 'Transpuesta', 'Determinante', 'Rango'], i: 1 },
                { q: 'La multiplicaci√≥n A @ v donde v es 1D...', a: ['Es v√°lida si dimensiones compatibles', 'Nunca es v√°lida', 'Convierte a escalar siempre', 'Ordena v'], i: 0 },
                { q: 'Slicing A[0,:] devuelve...', a: ['Primera columna', 'Primera fila', 'Diagonal', '√öltima columna'], i: 1 },
                { q: 'Broadcasting: A(3x3) + v(3,) suma...', a: ['v a cada fila', 'v a cada columna', 'Error', 'Devuelve escalar'], i: 0 },
                { q: 'Para obtener una copia modificable de b:', a: ['b.copy()', 'b.clone()', 'copy.deepcopy(b)', 'b.dup()'], i: 0 },
                { q: 'En Cramer, x_i se obtiene...', a: ['Reemplazando columna i por b y dividiendo por det(A)', 'Sumando filas', 'Restando columnas', 'Transponiendo A'], i: 0 },
                { q: 'Si det(A)=0, entonces...', a: ['Cramer no aplica', 'Cramer funciona igual', 'Hay soluci√≥n √∫nica', 'A es identidad'], i: 0 },
                { q: 'np.append(array, val) devuelve...', a: ['El mismo array modificado', 'Un nuevo array', 'Una lista', 'None'], i: 1 },
                { q: 'El acceso A[2,2] en A 3x3 es...', a: ['Tercera fila, tercera columna', 'Segunda fila, segunda columna', 'Primera columna', 'Diagonal principal completa'], i: 0 },
                { q: 'La transpuesta de vector columna (3,1) es...', a: ['(1,3)', '(3,3)', '(3,)', '(1,)'], i: 0 },
                { q: 'Las operaciones vectorizadas mejoran rendimiento porque...', a: ['Usan bucles en C optimizados', 'Evitan CPU', 'Usan Python puro', 'Duplican memoria siempre'], i: 0 },
                { q: 'Row-major es usado por...', a: ['NumPy y C', 'Fortran y MATLAB', 'JavaScript', 'SQL'], i: 0 },
                { q: 'Column-major es usado por...', a: ['Fortran/MATLAB', 'NumPy por defecto', 'Python listas', 'JSON'], i: 0 },
                { q: 'Para ver dimensi√≥n de A usamos...', a: ['A.shape', 'len(A[0])', 'A.type', 'A.bytes'], i: 0 },
                { q: 'Elemento a elemento de a1**2 calcula...', a: ['Cuadrado de cada elemento', 'Determinante', 'Transpuesta', 'Inversa'], i: 0 },
                { q: 'El s√≠mbolo : en slicing significa...', a: ['Todo el rango', 'Ning√∫n elemento', 'S√≥lo pares', 'S√≥lo impares'], i: 0 },
                { q: 'Un array 1D es ideal para...', a: ['Secuencias simples', 'Matrices dispersas', 'Im√°genes 2D', 'Grafos'], i: 0 },
                { q: 'La representaci√≥n Ax=b separa...', a: ['Coeficientes, inc√≥gnitas y t√©rminos independientes', 'Variables y funciones', 'Filas y diagonales', 'Listas y tuplas'], i: 0 },
                { q: 'Para imprimir una matriz A bonita...', a: ['print(A)', 'print.str(A)', 'A.show()', 'A.render()'], i: 0 },
                { q: 'La suma A + B requiere...', a: ['Igual shape', 'A cuadrada', 'B diagonal', 'det(A)=1'], i: 0 },
                { q: 'La operaci√≥n A * v con v(3,) sobre A(3x3)...', a: ['Multiplica cada columna por v elemento a elemento', 'Es producto matricial', 'No soporta broadcasting', 'Devuelve escalar'], i: 0 },
                { q: 'Para seleccionar la columna de y: A[:,1] implica...', a: ['√çndice base 0', '√çndice base 1', '√çndice letra', '√çndice negativo obligatorio'], i: 0 },
                { q: 'El tama√±o en bytes depende de...', a: ['dtype', 'Contenido textual', 'Orden de columnas', 'Color del editor'], i: 0 },
                { q: 'np.array([...], dtype=float) define...', a: ['El tipo de datos', 'El orden de memoria', 'La transpuesta', 'El determinante'], i: 0 },
                { q: 'Si A es 3x3 y v es (3,), A+v retorna...', a: ['3x3', '3x1', '1x3', 'Error'], i: 0 },
                { q: 'La funci√≥n correcta para determinante es...', a: ['np.linalg.det', 'np.det', 'np.math.det', 'det() global'], i: 0 },
                { q: 'Para copiar una fila: fila=A[0,:] es...', a: ['Slicing v√°lido', 'Error', 'Transpuesta', 'Determinante'], i: 0 },
                { q: 'El m√©todo de Cramer es...', a: ['Computacionalmente costoso vs solve', 'Siempre m√°s r√°pido', 'Solo para 2x2', 'Solo para 4x4'], i: 0 },
                { q: 'El vector b en Ax=b es...', a: ['T√©rminos independientes', 'Coeficientes', 'Residuos', 'Variables'], i: 0 },
                { q: 'La transpuesta preserva...', a: ['Dimensi√≥n invertida', 'Determinante siempre igual', 'Tipo cambia a complejo', 'Bytes iguales siempre'], i: 0 },
                { q: 'np.append no muta porque...', a: ['Crea nuevo array', 'Borra memoria', 'Cambia dtype siempre', 'Es inv√°lido'], i: 0 },
                { q: 'En broadcasting, una dimensi√≥n de tama√±o 1...', a: ['Se expande para coincidir', 'Se ignora', 'Causa error', 'Se convierte en 0'], i: 0 }
            ];

            var currentQuiz = [];
            var quizTimerId = null;
            var quizTimeLeft = 0;
            var quizSubmitted = false;

            function pickRandom(arr, k) {
                var copy = arr.slice();
                for (var i = copy.length - 1; i > 0; i--) {
                    var j = Math.floor(Math.random() * (i + 1));
                    var t = copy[i]; copy[i] = copy[j]; copy[j] = t;
                }
                return copy.slice(0, k);
            }

            function updateTimerBadge() {
                var badge = document.getElementById('quiz-timer');
                if (!badge) return;
                if (quizTimeLeft < 0) quizTimeLeft = 0;
                badge.textContent = '‚è≥ ' + quizTimeLeft + ' s';
            }

            function startQuizTimer() {
                clearInterval(quizTimerId);
                quizTimeLeft = 120;
                updateTimerBadge();
                quizTimerId = setInterval(function () {
                    quizTimeLeft -= 1;
                    updateTimerBadge();
                if (quizTimeLeft <= 0) {
                        clearInterval(quizTimerId);
                        submitQuiz(true);
                    }
                }, 1000);
            }

            function closeQuizModal() {
                var modal = document.getElementById('quiz-modal-overlay');
                if (modal) {
                    modal.style.display = 'none';
                }
                startQuizTimer();
            }

            function showQuizModal() {
                var modal = document.getElementById('quiz-modal-overlay');
                if (modal) {
                    modal.style.display = 'flex';
                }
            }

            function generateQuiz(startTimer) {
                currentQuiz = pickRandom(QUESTION_BANK, 10);
                var container = document.getElementById('quiz-container');
                var result = document.getElementById('quiz-result');
                result.textContent = '';
                quizSubmitted = false;
                if (startTimer !== false) {
                    var modal = document.getElementById('quiz-modal-overlay');
                    if (modal) modal.style.display = 'none';
                    startQuizTimer();
                }
                var html = '';
                currentQuiz.forEach(function(item, idx) {
                    html += '<div style="margin-bottom:14px;">';
                    html += '<strong>' + (idx + 1) + '. ' + item.q + '</strong>';
                    html += '<div style="margin-top:8px; display:grid; gap:6px;">';
                    item.a.forEach(function(opt, oi) {
                        var name = 'q' + idx;
                        var id = name + '_' + oi;
                        html += '<label class="quiz-option" style="display:flex; gap:8px; align-items:center;">';
                        html += '<input type="radio" name="' + name + '" value="' + oi + '">';
                        html += '<span>' + opt + '</span>';
                        html += '</label>';
                    });
                    html += '</div></div>';
                });
                html += '<div style="margin-top:16px;">' +
                        '<button id="quiz-submit" onclick="submitQuiz()" style="padding:12px 16px; border-radius:10px; border:1px solid #764ba2; background:#fff; color:#764ba2; cursor:pointer; font-weight:600;">‚úÖ Enviar respuestas</button>' +
                        '</div>';
                container.innerHTML = html;
                var submitBtn = document.getElementById('quiz-submit');
                if (submitBtn) submitBtn.disabled = false;
            }

            function submitQuiz(auto) {
                if (quizSubmitted) return; // evitar doble env√≠o
                quizSubmitted = true;
                clearInterval(quizTimerId);
                if (!currentQuiz.length) {
                    generateQuiz();
                }
                var correct = 0;
                for (var i = 0; i < currentQuiz.length; i++) {
                    var radios = document.getElementsByName('q' + i);
                    for (var r = 0; r < radios.length; r++) {
                        if (radios[r].checked) {
                            if (parseInt(radios[r].value, 10) === currentQuiz[i].i) correct++;
                            break;
                        }
                    }
                }
                // Marcar correctas/incorrectas y deshabilitar
                for (var i = 0; i < currentQuiz.length; i++) {
                    var radios2 = document.getElementsByName('q' + i);
                    for (var r2 = 0; r2 < radios2.length; r2++) {
                        var label = radios2[r2].parentElement;
                        label.classList.remove('correct', 'incorrect');
                        if (parseInt(radios2[r2].value, 10) === currentQuiz[i].i) {
                            label.classList.add('correct');
                        }
                        if (radios2[r2].checked && parseInt(radios2[r2].value, 10) !== currentQuiz[i].i) {
                            label.classList.add('incorrect');
                        }
                        radios2[r2].disabled = true;
                    }
                }
                var result = document.getElementById('quiz-result');
                result.innerHTML = '<span class="quiz-score">Puntaje: ' + correct + ' / ' + currentQuiz.length + '</span>';
                // Autoscroll para mostrar el puntaje
                setTimeout(function () {
                    result.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 50);
                var submitBtn = document.getElementById('quiz-submit');
                if (submitBtn) submitBtn.disabled = true;
            }
        </script>
        <script>
            // Initialize Vanta WAVES background (green over white)
            (function () {
                if (window.VANTA && window.VANTA.WAVES) {
                    window.VANTA.WAVES({
                        el: "#vanta-bg",
                        color: 0x0b5e2a,           // verde oscuro similar a la imagen
                        shininess: 35,
                        waveHeight: 20,
                        waveSpeed: 0.75,
                        zoom: 1.0,
                        backgroundColor: 0xffffff  // blanco
                    });

                    // Banner del men√∫ (sidebar header)
                    window.VANTA.WAVES({
                        el: "#menu-banner",
                        color: 0x0b5e2a,
                        shininess: 30,
                        waveHeight: 12,
                        waveSpeed: 0.6,
                        zoom: 1.0,
                        backgroundColor: 0x1b1f23  // se ignora detr√°s, el contenedor es transparente
                    });
                }
            })();
        </script>